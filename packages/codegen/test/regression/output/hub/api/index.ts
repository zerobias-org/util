/* eslint-disable */
// ===============================================
// This file is autogenerated - Please do not edit
// ===============================================
import { AccessRuleApi, AccessRuleApiMappingImpl, AccessRuleProducerApi, AccessRuleApiHttpImpl, wrapAccessRuleProducer } from './AccessRuleApi.js';

export * from './AccessRuleApi.js';

import { AlertApi, AlertApiMappingImpl, AlertProducerApi, AlertApiHttpImpl, wrapAlertProducer } from './AlertApi.js';

export * from './AlertApi.js';

import { ConnectionApi, ConnectionApiMappingImpl, ConnectionProducerApi, ConnectionApiHttpImpl, wrapConnectionProducer } from './ConnectionApi.js';

export * from './ConnectionApi.js';

import { DeploymentApi, DeploymentApiMappingImpl, DeploymentProducerApi, DeploymentApiHttpImpl, wrapDeploymentProducer } from './DeploymentApi.js';

export * from './DeploymentApi.js';

import { ExecutionApi, ExecutionApiMappingImpl, ExecutionProducerApi, ExecutionApiHttpImpl, wrapExecutionProducer } from './ExecutionApi.js';

export * from './ExecutionApi.js';

import { HealthcheckApi, HealthcheckApiMappingImpl, HealthcheckProducerApi, HealthcheckApiHttpImpl, wrapHealthcheckProducer } from './HealthcheckApi.js';

export * from './HealthcheckApi.js';

import { ModuleApi, ModuleApiMappingImpl, ModuleProducerApi, ModuleApiHttpImpl, wrapModuleProducer } from './ModuleApi.js';

export * from './ModuleApi.js';

import { NodeApi, NodeApiMappingImpl, NodeProducerApi, NodeApiHttpImpl, wrapNodeProducer } from './NodeApi.js';

export * from './NodeApi.js';

import { PermissionApi, PermissionApiMappingImpl, PermissionProducerApi, PermissionApiHttpImpl, wrapPermissionProducer } from './PermissionApi.js';

export * from './PermissionApi.js';

import { PrincipalApi, PrincipalApiMappingImpl, PrincipalProducerApi, PrincipalApiHttpImpl, wrapPrincipalProducer } from './PrincipalApi.js';

export * from './PrincipalApi.js';

import { ResourceApi, ResourceApiMappingImpl, ResourceProducerApi, ResourceApiHttpImpl, wrapResourceProducer } from './ResourceApi.js';

export * from './ResourceApi.js';

import { RoleApi, RoleApiMappingImpl, RoleProducerApi, RoleApiHttpImpl, wrapRoleProducer } from './RoleApi.js';

export * from './RoleApi.js';

import { ScopeApi, ScopeApiMappingImpl, ScopeProducerApi, ScopeApiHttpImpl, wrapScopeProducer } from './ScopeApi.js';

export * from './ScopeApi.js';

import { SecretApi, SecretApiMappingImpl, SecretProducerApi, SecretApiHttpImpl, wrapSecretProducer } from './SecretApi.js';

export * from './SecretApi.js';

import { TagApi, TagApiMappingImpl, TagProducerApi, TagApiHttpImpl, wrapTagProducer } from './TagApi.js';

export * from './TagApi.js';

import { TargetApi, TargetApiMappingImpl, TargetProducerApi, TargetApiHttpImpl, wrapTargetProducer } from './TargetApi.js';

export * from './TargetApi.js';

import { Semver } from '@zerobias-org/types-core-js';
export const VERSION = new Semver('3.15.0');

import { BaseApiClient, ConnectionProfile } from '@zerobias-org/util-api-client-base';
import { AxiosInstance } from 'axios';

// Re-export model types for convenience
export * from '../model/index.js';

// Re-export ConnectionProfile for consumers
export { ConnectionProfile } from '@zerobias-org/util-api-client-base';

/**
 * HubServer API interface
 *
 * Defines the available API endpoints for this service.
 */
export interface HubServer {
  getAccessRuleApi(): AccessRuleApi;
  getAlertApi(): AlertApi;
  getConnectionApi(): ConnectionApi;
  getDeploymentApi(): DeploymentApi;
  getExecutionApi(): ExecutionApi;
  getHealthcheckApi(): HealthcheckApi;
  getModuleApi(): ModuleApi;
  getNodeApi(): NodeApi;
  getPermissionApi(): PermissionApi;
  getPrincipalApi(): PrincipalApi;
  getResourceApi(): ResourceApi;
  getRoleApi(): RoleApi;
  getScopeApi(): ScopeApi;
  getSecretApi(): SecretApi;
  getTagApi(): TagApi;
  getTargetApi(): TargetApi;
}

/**
 * HubServer API Client
 *
 * Platform API client for direct HTTP access to the service.
 * Uses BaseApiClient for connection management, auth, and request pipeline.
 *
 * @example
 * ```typescript
 * const client = newHubServer();
 * await client.connect({
 *   url: 'http://localhost:8080',
 *   apiKey: 'your-api-key',
 *   orgId: 'org-uuid'
 * });
 *
 * const result = await client.getSomeApi().someMethod();
 * ```
 */
export class HubServerClient implements HubServer {
  private baseClient: BaseApiClient;
  private client: AxiosInstance | null = null;
  private headers: { [key: string]: string } = {};

  constructor() {
    this.baseClient = new BaseApiClient();
  }

  /**
   * Connect to the service with connection profile
   */
  async connect(connectionProfile: ConnectionProfile): Promise<void> {
    await this.baseClient.connect(connectionProfile);

    // Get the AxiosInstance from BaseApiClient
    const axiosInstance = this.baseClient.httpClient();
    if (!axiosInstance) {
      throw new Error('Failed to initialize HTTP client');
    }
    this.client = axiosInstance;

    // Set up headers from connection profile for generated API classes
    if (connectionProfile.apiKey) {
      this.headers['Authorization'] = `APIKey ${connectionProfile.apiKey}`;
    }
    if (connectionProfile.jwt) {
      this.headers['Authorization'] = `Bearer ${connectionProfile.jwt}`;
    }
    if (connectionProfile.orgId) {
      // Handle orgId - convert to string if it's a UUID object
      const orgIdStr = typeof connectionProfile.orgId === 'string'
        ? connectionProfile.orgId
        : connectionProfile.orgId.toString();
      this.headers['dana-org-id'] = orgIdStr;
    }
  }

  /**
   * Disconnect from the service
   */
  async disconnect(): Promise<void> {
    return this.baseClient.disconnect();
  }

  /**
   * Check if connected to the service
   */
  isConnected(): boolean {
    return this.client !== null && this.baseClient.connectionProfile !== undefined;
  }

  /**
   * Enable or disable request inspection
   *
   * When enabled, all HTTP requests and responses are captured and can be
   * accessed via getRequestInspector(). Useful for debugging and testing.
   *
   * @param enabled - True to enable inspection, false to disable
   */
  enableRequestInspection(enabled: boolean): void {
    this.baseClient.enableDebug(enabled);
  }

  /**
   * Get request inspector instance
   *
   * Returns the RequestInspector for accessing captured HTTP requests/responses.
   * Returns undefined if inspection is not enabled.
   *
   * @returns RequestInspector instance or undefined
   */
  getRequestInspector() {
    return this.baseClient.getRequestInspector();
  }

  // Implement HubServer interface methods
  getAccessRuleApi(): AccessRuleApi {
    if (!this.client) throw new Error('Not connected');
    return wrapAccessRuleProducer(new AccessRuleApiHttpImpl(this.client, this.headers));
  }

  getAlertApi(): AlertApi {
    if (!this.client) throw new Error('Not connected');
    return wrapAlertProducer(new AlertApiHttpImpl(this.client, this.headers));
  }

  getConnectionApi(): ConnectionApi {
    if (!this.client) throw new Error('Not connected');
    return wrapConnectionProducer(new ConnectionApiHttpImpl(this.client, this.headers));
  }

  getDeploymentApi(): DeploymentApi {
    if (!this.client) throw new Error('Not connected');
    return wrapDeploymentProducer(new DeploymentApiHttpImpl(this.client, this.headers));
  }

  getExecutionApi(): ExecutionApi {
    if (!this.client) throw new Error('Not connected');
    return wrapExecutionProducer(new ExecutionApiHttpImpl(this.client, this.headers));
  }

  getHealthcheckApi(): HealthcheckApi {
    if (!this.client) throw new Error('Not connected');
    return wrapHealthcheckProducer(new HealthcheckApiHttpImpl(this.client, this.headers));
  }

  getModuleApi(): ModuleApi {
    if (!this.client) throw new Error('Not connected');
    return wrapModuleProducer(new ModuleApiHttpImpl(this.client, this.headers));
  }

  getNodeApi(): NodeApi {
    if (!this.client) throw new Error('Not connected');
    return wrapNodeProducer(new NodeApiHttpImpl(this.client, this.headers));
  }

  getPermissionApi(): PermissionApi {
    if (!this.client) throw new Error('Not connected');
    return wrapPermissionProducer(new PermissionApiHttpImpl(this.client, this.headers));
  }

  getPrincipalApi(): PrincipalApi {
    if (!this.client) throw new Error('Not connected');
    return wrapPrincipalProducer(new PrincipalApiHttpImpl(this.client, this.headers));
  }

  getResourceApi(): ResourceApi {
    if (!this.client) throw new Error('Not connected');
    return wrapResourceProducer(new ResourceApiHttpImpl(this.client, this.headers));
  }

  getRoleApi(): RoleApi {
    if (!this.client) throw new Error('Not connected');
    return wrapRoleProducer(new RoleApiHttpImpl(this.client, this.headers));
  }

  getScopeApi(): ScopeApi {
    if (!this.client) throw new Error('Not connected');
    return wrapScopeProducer(new ScopeApiHttpImpl(this.client, this.headers));
  }

  getSecretApi(): SecretApi {
    if (!this.client) throw new Error('Not connected');
    return wrapSecretProducer(new SecretApiHttpImpl(this.client, this.headers));
  }

  getTagApi(): TagApi {
    if (!this.client) throw new Error('Not connected');
    return wrapTagProducer(new TagApiHttpImpl(this.client, this.headers));
  }

  getTargetApi(): TargetApi {
    if (!this.client) throw new Error('Not connected');
    return wrapTargetProducer(new TargetApiHttpImpl(this.client, this.headers));
  }

}

/**
 * Create a new HubServer API client instance
 *
 * @example
 * ```typescript
 * import { newHubServer } from 'sdk';
 *
 * const client = newHubServer();
 * await client.connect({
 *   url: 'http://localhost:8080',
 *   apiKey: 'your-api-key',
 *   orgId: 'org-uuid'
 * });
 *
 * const result = await client.getSomeApi().someMethod();
 * ```
 */
export function newHubServer(): HubServerClient {
  return new HubServerClient();
}
