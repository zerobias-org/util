/* eslint-disable */
// ===============================================
// This file is autogenerated - Please do not edit
// ===============================================
import { AxiosInstance } from 'axios';
import qs from 'qs';
{{#imports}}
import { {{classname}} } from '../{{filename}}/index.js';
{{/imports}}
{{#tsImports}}
import { {{classname}} } from '{{filename}}';
{{/tsImports}}
import { {{coreTypes}}CoreError, ParameterRequiredError, UnexpectedError, HttpMethod } from '@zerobias-org/types-core-js';
import { RequestFile, ObjectSerializer } from '../model/index.js';

{{#operations}}
export namespace {{classname}} {
{{#enums}}
  export const {{enumName}} = {
    {{#allowableValues}}
    {{#enumVars}}
    /** {{enumDescription}} */
    {{name}}: EnumValue.instance('{{classname}}.{{enumName}}', '{{{name}}}', {{{value}}}{{#escapedEnumDescription}}, '{{{.}}}'{{/escapedEnumDescription}}),
    {{/enumVars}}
    {{/allowableValues}}

    from(val: string | number): EnumValue {
      if ({{enumName}}[val]) {
        return {{enumName}}[val];
      }
      const byValue = {{enumName}}.values.find((v) => v.value === val);
      if (byValue) {
        return byValue;
      }
      throw new IllegalArgumentError(`${val} is not a valid {{enumName}}`);
    },

    get values(): EnumValue[] {
      return Object
        .keys({{enumName}})
        .filter((k) => k !== 'values' && k !== 'from')
        .map((t) => {{enumName}}[t]);
    }
  } as const;

export type {{enumName}}Def = typeof {{enumName}}[keyof typeof {{enumName}}];
{{/enums}}
}

/**
 * {{classname}} - interface{{#description}}
 * {{&description}}{{/description}}
 * @export
 * @interface {{classname}}
 */
export interface {{classname}} {
{{#operation}}
  /**
   * {{&notes}}
   {{#summary}}
   * @summary {{&summary}}
   {{/summary}}
   {{#allParams}}
   * @param {{=<% %>=}}{<%&dataType%>}<%={{ }}=%> {{^required}}[{{/required}}{{paramName}}{{^required}}]{{/required}} {{description}}
   {{/allParams}}
   * @param {*} [options] Override http request option.
   * @throws {@link @zerobias-org/types-core-js#ParameterRequiredError} if any required parameter is not provided
   {{#hasParams}}
   * @example
   * ```typescript
   * const result = await api.{{nickname}}({{#allParams}}{{^-first}}, {{/-first}}{{#isString}}'{{paramName}}'{{/isString}}{{#isUuid}}'00000000-0000-0000-0000-000000000000'{{/isUuid}}{{#isDateTime}}'2020-01-01T00:00:00Z'{{/isDateTime}}{{#isDate}}'2020-01-01'{{/isDate}}{{#isInteger}}1{{/isInteger}}{{#isLong}}1{{/isLong}}{{#isFloat}}1.0{{/isFloat}}{{#isDouble}}1.0{{/isDouble}}{{#isBoolean}}true{{/isBoolean}}{{^isString}}{{^isUuid}}{{^isDateTime}}{{^isDate}}{{^isInteger}}{{^isLong}}{{^isFloat}}{{^isDouble}}{{^isBoolean}}null{{/isBoolean}}{{/isDouble}}{{/isFloat}}{{/isLong}}{{/isInteger}}{{/isDate}}{{/isDateTime}}{{/isUuid}}{{/isString}}{{/allParams}});
   * ```
   {{/hasParams}}
   * @openapi operation={{operationId}} path={{path}} method={{httpMethod}}
   * @memberof {{classname}}
   */
  {{nickname}}({{#allParams}}{{paramName}}{{^required}}?{{/required}}: {{{datatypeWithEnum}}}{{^-last}}, {{/-last}}{{/allParams}}): Promise<{{#returnType}}{{{returnType}}}{{/returnType}}{{^returnType}}void{{/returnType}}>;

{{/operation}}
}
{{/operations}}

{{#operations}}
/**
 * {{producerName}} - interface
 * Producer interface for {{baseName}}
 * @export
 * @interface {{producerName}}
 */
export interface {{producerName}} {
{{#operation}}
{{#vendorExtensions.x-returns-paged-results}}
  /**
  * {{&notes}}
  {{#summary}}
  * @summary {{&summary}}
  {{/summary}}
  {{#allParams}}
  {{^vendorExtensions.x-producer-omit}}
  * @param {{=<% %>=}}{<%&dataType%>}<%={{ }}=%> {{^required}}[{{/required}}{{paramName}}{{^required}}]{{/required}} {{description}}
  {{/vendorExtensions.x-producer-omit}}
  {{/allParams}}
  * @param {*} [options] Override http request option.
  * @throws {@link @zerobias-org/types-core-js#ParameterRequiredError} if any required parameter is not provided
  * @openapi operation={{operationId}} path={{path}} method={{httpMethod}}
  * @memberof {{baseName}}
  */
  {{nickname}}(results: {{{returnType}}}{{#allParams}}{{^vendorExtensions.x-producer-omit}}, {{paramName}}{{^required}}?{{/required}}: {{{datatypeWithEnum}}}{{/vendorExtensions.x-producer-omit}}{{/allParams}}): Promise<void>;
{{/vendorExtensions.x-returns-paged-results}}
{{^vendorExtensions.x-returns-paged-results}}
  /**
  * {{&notes}}
  {{#summary}}
  * @summary {{&summary}}
  {{/summary}}
  {{#allParams}}
  * @param {{=<% %>=}}{<%&dataType%>}<%={{ }}=%> {{^required}}[{{/required}}{{paramName}}{{^required}}]{{/required}} {{description}}
  {{/allParams}}
  * @param {*} [options] Override http request option.
  * @throws {@link @zerobias-org/types-core-js#ParameterRequiredError} if any required parameter is not provided
  * @openapi operation={{operationId}} path={{path}} method={{httpMethod}}
  * @memberof {{baseName}}
  */
  {{nickname}}({{#allParams}}{{paramName}}{{^required}}?{{/required}}: {{{datatypeWithEnum}}}{{^-last}}, {{/-last}}{{/allParams}}): Promise<{{#returnType}}{{{returnType}}}{{/returnType}}{{^returnType}}void{{/returnType}}>;
{{/vendorExtensions.x-returns-paged-results}}
{{/operation}}
}
{{/operations}}

{{#operations}}
{{#description}}
/**
* {{&description}}
*/
{{/description}}
export class {{classname}}MappingImpl implements {{classname}} {
  private producer: {{producerName}};
  constructor(producer: {{producerName}}) {
    this.producer = producer;
  }

{{#operation}}
  /**
   * {{&notes}}
   {{#summary}}
   * @summary {{&summary}}
   {{/summary}}
   {{#allParams}}
   * @param {{paramName}} {{description}}
   {{/allParams}}
   * @openapi operation={{operationId}} path={{path}} method={{httpMethod}}
   */
  public async {{nickname}}({{#allParams}}{{paramName}}{{^required}}{{^defaultValue}}?{{/defaultValue}}{{/required}}: {{{datatypeWithEnum}}}{{#defaultValue}} = {{{defaultValue}}}{{/defaultValue}}{{^-last}}, {{/-last}}{{/allParams}}): Promise<{{#returnType}}{{{returnType}}}{{/returnType}}{{^returnType}}void{{/returnType}}> {
{{#allParams}}
{{#required}}
    // verify required parameter '{{paramName}}' is not null or undefined
    if ({{paramName}} === null || {{paramName}} === undefined{{#isString}}{{^isEnum}} || {{paramName}} === ''{{/isEnum}}{{/isString}}) {
      throw new ParameterRequiredError('{{paramName}}');
    }
{{/required}}
{{#vendorExtensions.x-validate-with}}
    if ({{paramName}}) {
      await {{.}}.parse({{paramName}});
    }
{{/vendorExtensions.x-validate-with}}
{{/allParams}}
{{#vendorExtensions.x-returns-paged-results}}
    const bag = new {{{returnType}}}();
    {{#allParams}}
    {{#vendorExtensions.x-producer-omit}}
    {{#vendorExtensions.x-pagination-param}}
    bag.{{baseName}} = {{baseName}};
    {{/vendorExtensions.x-pagination-param}}
    {{/vendorExtensions.x-producer-omit}}
    {{/allParams}}
    {{#vendorExtensions.x-has-sort}}
    if (sortBy && sortDir) {
      bag.sort(sortBy, sortDir);
    }
    {{/vendorExtensions.x-has-sort}}
    await this.producer.{{nickname}}(bag{{#allParams}}{{^vendorExtensions.x-producer-omit}}, {{paramName}}{{/vendorExtensions.x-producer-omit}}{{/allParams}});
    if (bag.items === null || bag.items === undefined) {
      throw new UnexpectedError("Producers must return 'items' for PagedResults queries");
    }
    return bag;
{{/vendorExtensions.x-returns-paged-results}}
{{^vendorExtensions.x-returns-paged-results}}
    return this.producer.{{nickname}}({{#allParams}}{{paramName}}{{^-last}}, {{/-last}}{{/allParams}});
{{/vendorExtensions.x-returns-paged-results}}
  }
{{/operation}}
}
{{/operations}}

/**
 * Wrap producer with mapping implementation
 */
export function wrap{{baseName}}Producer(producer: {{producerName}}): {{classname}} {
  return new {{classname}}MappingImpl(producer);
}

/**
 * {{classname}}HttpImpl - Direct HTTP implementation
 *
 * Makes direct HTTP calls to the API using Axios.
 * Used by SDK clients for platform service access.
 */
export class {{classname}}HttpImpl implements {{producerName}} {
  private client: AxiosInstance;
  private headers: Record<string, string>;

  constructor(client: AxiosInstance, headers: Record<string, string> = {}) {
    this.client = client;
    this.headers = headers;
  }

{{#operations}}
{{#operation}}
{{#vendorExtensions.x-returns-paged-results}}
  async {{nickname}}(results: {{{returnType}}}{{#allParams}}{{^vendorExtensions.x-producer-omit}}, {{paramName}}{{^required}}?{{/required}}: {{{datatypeWithEnum}}}{{/vendorExtensions.x-producer-omit}}{{/allParams}}): Promise<void> {
{{/vendorExtensions.x-returns-paged-results}}
{{^vendorExtensions.x-returns-paged-results}}
  async {{nickname}}({{#allParams}}{{paramName}}{{^required}}?{{/required}}: {{{datatypeWithEnum}}}{{^-last}}, {{/-last}}{{/allParams}}): Promise<{{#returnType}}{{{returnType}}}{{/returnType}}{{^returnType}}void{{/returnType}}> {
{{/vendorExtensions.x-returns-paged-results}}
  {{! Separate path params from query/body params }}
  {{^vendorExtensions.x-returns-paged-results}}
  const _queryParams = {
      {{#queryParams}}{{paramName}},{{/queryParams}}
  };
  {{#vendorExtensions.x-is-binary-body}}
  const _bodyParams = {{#bodyParams}}{{paramName}}{{/bodyParams}};
  {{/vendorExtensions.x-is-binary-body}}
  {{^vendorExtensions.x-is-binary-body}}
  const _bodyParams = {
      {{#vendorExtensions.x-single-body-param}}...({{#bodyParams}}{{paramName}}{{/bodyParams}} ?? {}),{{/vendorExtensions.x-single-body-param}}{{^vendorExtensions.x-single-body-param}}{{#bodyParams}}{{paramName}},{{/bodyParams}}{{/vendorExtensions.x-single-body-param}}
  };
  {{/vendorExtensions.x-is-binary-body}}
  {{/vendorExtensions.x-returns-paged-results}}
  {{#vendorExtensions.x-returns-paged-results}}
  {{#vendorExtensions.x-is-binary-body}}
  const _body = {{#bodyParams}}{{paramName}}{{/bodyParams}};
  {{/vendorExtensions.x-is-binary-body}}
  {{^vendorExtensions.x-is-binary-body}}
  const _body = {
      {{#vendorExtensions.x-single-body-param}}...({{#bodyParams}}{{paramName}}{{/bodyParams}} ?? {}),{{/vendorExtensions.x-single-body-param}}{{^vendorExtensions.x-single-body-param}}{{#allParams}}{{^vendorExtensions.x-producer-omit}}{{paramName}},{{/vendorExtensions.x-producer-omit}}{{/allParams}}{{/vendorExtensions.x-single-body-param}}
  };
  {{/vendorExtensions.x-is-binary-body}}
  {{/vendorExtensions.x-returns-paged-results}}
  {{! Build path with path params substituted }}
  let _path = '{{path}}';
  {{#pathParams}}
  _path = _path.replace('{{=<% %>=}}{<%baseName%>}<%={{ }}=%>', encodeURIComponent(String({{paramName}})));
  {{/pathParams}}
  {{#vendorExtensions.x-is-get-method}}
  return this.client.{{vendorExtensions.x-lower-http-method}}(
    _path,
    {{#vendorExtensions.x-returns-paged-results}}{
      params: {
        ..._body,
        {{#vendorExtensions.x-pagination-include-page-number}}pageNumber: results.pageNumber,{{/vendorExtensions.x-pagination-include-page-number}}{{#vendorExtensions.x-pagination-include-page-token}}pageToken: results.pageToken,{{/vendorExtensions.x-pagination-include-page-token}}
        pageSize: results.pageSize,
      },
      paramsSerializer: (params) => qs.stringify(params, { skipNulls: true }),
    }{{/vendorExtensions.x-returns-paged-results}}{{^vendorExtensions.x-returns-paged-results}}{ params: _queryParams, paramsSerializer: (params) => qs.stringify(params, { skipNulls: true }) }{{/vendorExtensions.x-returns-paged-results}})
  {{/vendorExtensions.x-is-get-method}}
  {{#vendorExtensions.x-is-delete-method}}
  return this.client.{{vendorExtensions.x-lower-http-method}}(
    _path,
    {{#vendorExtensions.x-returns-paged-results}}{
      params: {
        ..._body,
        {{#vendorExtensions.x-pagination-include-page-number}}pageNumber: results.pageNumber,{{/vendorExtensions.x-pagination-include-page-number}}{{#vendorExtensions.x-pagination-include-page-token}}pageToken: results.pageToken,{{/vendorExtensions.x-pagination-include-page-token}}
        pageSize: results.pageSize,
      },
      paramsSerializer: (params) => qs.stringify(params, { skipNulls: true }),
    }{{/vendorExtensions.x-returns-paged-results}}{{^vendorExtensions.x-returns-paged-results}}{ params: _queryParams, paramsSerializer: (params) => qs.stringify(params, { skipNulls: true }) }{{/vendorExtensions.x-returns-paged-results}})
  {{/vendorExtensions.x-is-delete-method}}
  {{^vendorExtensions.x-is-get-method}}
  {{^vendorExtensions.x-is-delete-method}}
  return this.client.{{vendorExtensions.x-lower-http-method}}(
    _path,
    {{#vendorExtensions.x-returns-paged-results}}{
      ..._body,
      {{#vendorExtensions.x-pagination-include-page-number}}pageNumber: results.pageNumber,{{/vendorExtensions.x-pagination-include-page-number}}{{#vendorExtensions.x-pagination-include-page-token}}pageToken: results.pageToken,{{/vendorExtensions.x-pagination-include-page-token}}
      pageSize: results.pageSize,
    }{{/vendorExtensions.x-returns-paged-results}}{{^vendorExtensions.x-returns-paged-results}}_bodyParams{{/vendorExtensions.x-returns-paged-results}})
  {{/vendorExtensions.x-is-delete-method}}
  {{/vendorExtensions.x-is-get-method}}
    .then((response) => {
      // BaseApiClient uses validateStatus: () => true, so we must check status manually
      if (response.status >= 400) {
        throw CoreError.deserialize(response.data);
      }
      {{#vendorExtensions.x-returns-paged-results}}
      results.items = ObjectSerializer.deserialize(response.data, 'Array<{{{returnBaseType}}}>');
      results.count = response.headers.count ? Number(response.headers.count) : -1;
      results.pageToken = response.headers.pagetoken ?? response.headers.pageToken;
      results.headers = this.headers;
      results.baseUrl = new URL(`${this.client.getUri()}{{path}}`);
      results.httpMethod = HttpMethod.{{vendorExtensions.x-titlecase-http-method}};
      results.body = _body;
      results.mapper = (obj) => ObjectSerializer.deserialize(obj, '{{{returnBaseType}}}');
      {{/vendorExtensions.x-returns-paged-results}}
      {{^vendorExtensions.x-returns-paged-results}}
      return ObjectSerializer.deserialize(response.data, '{{{returnType}}}')
      {{/vendorExtensions.x-returns-paged-results}}
    })
    .catch((error) => {
      if (error.data) {
        throw CoreError.deserialize(error.data);
      } else {
        throw error;
      }
    });
  }
{{/operation}}
{{/operations}}
}
